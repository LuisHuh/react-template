/**
 * @mixin dropdown
 * @version 1.0.0
 * @author Luis Enrique Huh Puc
 * @summary Estilos de dropdown.
 */

////
/// @group dropdown
////

/// Default text color for dropdown button.
/// @type Color
$dropdown-trigger-color: #fff !default;

/// Default text color for hover dropdown button.
/// @type Color
$dropdown-trigger-hover-color: $dropdown-trigger-color !default;

/// Default background color for dropdown button.
/// @type Color
$dropdown-trigger-background: #26a69a !default;

/// Default background color for dropdown list.
/// @type Color
$dropdown-background-color: #fff !default;

/// Default text color for dropdown list.
/// @type Color
$dropdown-color: $dropdown-trigger-background !default;

/// Default background color for divider list on dropdown.
/// @type Color
$dropdown-divider-color: #e0e0e0 !default;

/// Default background color for hover on dropdown list.
/// @type Color
$dropdown-hover-color: #000 !default;

/// Default border for dropdown and list.
/// @type List
$dropdown-border: none !default;

/// Default border radius for dropdown button and list.
/// @type List
$dropdown-border-radius: 2px !default;

/// Default font size for dropdown trigger.
/// @type Number
$dropdown-trigger-font-size: 14px !default;

/// Default font size for dropdown list.
/// @type Number
$dropdown-font-size: 16px !default;

/// Default size for caret on dropdown trigger.
/// @type Number
$dropdown-caret-size: 32px !default;

/// Set if box shadow will be included on dropdown button and list.
/// @type Boolean
$dropdown-include-shadow: true !default;

////
/// @group select
////

/// Default color for disabled select.
/// @type Color
$select-disabled-color: $input-disabled-color !default;

// Button Trigger
// ----------------------
@mixin btn-trigger {
	border: none;
	border-radius: $dropdown-border-radius;
	display: inline-block;
	height: 36px;
	line-height: 36px;
	padding: 0 16px;
	text-transform: uppercase;
	vertical-align: middle;
	-webkit-tap-highlight-color: transparent;
	font-size: $dropdown-trigger-font-size;
	outline: none;
	text-decoration: none;
	color: $dropdown-trigger-color;
	background-color: $dropdown-trigger-background;
	text-align: center;
	letter-spacing: 0.5px;
	transition: background-color 0.2s ease-out;
	cursor: pointer;
	@if $dropdown-include-shadow == true {
		@include box-shadow;
	}

	&:focus,
	&:active,
	&:hover {
		outline: none;
		color: $dropdown-trigger-hover-color;
		background-color: darken($dropdown-trigger-background, 5%);
	}
}

// Dropdown List
// ----------------------
@mixin dropdown-list {
	background-color: $dropdown-background-color;
	margin: 0;
	display: none;
	min-width: 100px;
	overflow-y: auto;
	opacity: 0;
	position: absolute;
	left: 0;
	top: 0;
	z-index: 9999;
	transform-origin: 0 0;
	padding-left: 0;
	list-style-type: none;
	border: $dropdown-border;
	border-radius: $dropdown-border-radius;
	@if $dropdown-include-shadow == true {
		@include box-shadow;
	}

	li {
		cursor: pointer;
		clear: both;
		min-height: 30px;
		line-height: 1.5rem;
		width: 100%;
		text-align: left;
		list-style-type: none;
		outline: none;

		&.divider {
			min-height: 0;
			height: 1px;
			overflow: hidden;
			background-color: $dropdown-divider-color;
		}

		a,
		span {
			font-size: $dropdown-font-size;
			color: $dropdown-color;
			display: block;
			line-height: 22px;
			padding: 5px 7px;
			text-decoration: none;
			text-transform: capitalize;
			-webkit-tap-highlight-color: transparent;
		}

		&:hover,
		&:active {
			background-color: rgba($dropdown-hover-color, 0.03);
		}

		&.active {
			background-color: rgba($dropdown-hover-color, 0.03);
		}

		&:hover,
		&:focus {
			background-color: rgba($dropdown-hover-color, 0.08);
		}
	}
}

// Select
// ----------------------
@mixin drop-select {
	position: relative;
	.caret {
		position: absolute;
		right: 0;
		top: 50%;
		z-index: 0;
		fill: $dropdown-trigger-background;
		transform: translateY(-60%);
		width: $dropdown-caret-size;
		height: $dropdown-caret-size;
	}

	&::after {
		content: "";
		position: absolute;
		right: $dropdown-caret-size;
		width: 1px;
		height: calc(100% - 8px);
		background-color: $dropdown-trigger-background;
	}

	&.validate.valid .helper-text[data-success],
	&.validate.invalid ~ .helper-text[data-error] {
		@extend %hidden-text;
	}

	&.validate.valid {
		& > input {
			@extend %valid-input-style;
		}

		& ~ .helper-text:after {
			@extend %custom-success-message;
		}
	}

	&.validate.invalid {
		& > input,
		& > input:focus {
			@extend %invalid-input-style;
		}

		& ~ .helper-text:after {
			@extend %custom-error-message;
		}
	}

	&.validate.valid + label,
	&.validate.invalid + label {
		width: 100%;
		pointer-events: none;
	}

	& + label:after {
		@extend %input-after-style;
	}

	& + label {
		position: absolute;
		transform: translateY(-25px) scale(0.9);
		transform-origin: 0 0;
	}

	&.disabled {
		+ label {
			color: $input-disabled-color;
		}
		.caret {
			fill: $input-disabled-color;
		}
	}

	& > input {
		&:disabled {
			color: $input-disabled-color;
			cursor: default;
			user-select: none;
		}
	}

	i {
		color: $select-disabled-color;
	}
}

// Autocomplete
// ----------------------
@mixin autocomplete {
	position: relative;
}

@mixin web-dropdown {
	[component="btn-trigger"] {
		@include btn-trigger;
	}

	[component="dropdown-list"] {
		@include dropdown-list;
	}
	[component="select"] {
		@include drop-select;
	}
	[component="autocomplete"] {
		@include autocomplete;
	}

	// Prefix Icons
	.prefix ~ [component="select"] {
		margin-left: 3rem;
		width: 92%;
		width: calc(100% - 3rem);
	}
}
