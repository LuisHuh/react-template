/* Checkboxes
   ========================================================================== */

$checkbox-fill-color: #13a8ce !default;
$checkbox-empty-color: #5a5a5a !default;
$checkbox-disable-color: $input-disabled-color !default;
$checkbox-active-color: $checkbox-fill-color !default;
$checkbox-border: 2px solid $checkbox-fill-color !default;
$checkbox-top: -4px !default;
$checkbox-left: 4px !default;
$checkbox-width: 8px !default;
$checkbox-height: 18px !default;

$checkbox-filled-in-fill-color: $checkbox-fill-color !default;
$checkbox-filled-in-border-color: $checkbox-fill-color !default;
$checkbox-filled-in-background-color: white !default;
$checkbox-filled-in-checked-border-color: $checkbox-fill-color !default;
$checkbox-filled-in-checked-background-color: white !default;
$checkbox-filled-in-disabled-color: white !default;
$checkbox-filled-in-disabled-border-color: $checkbox-disable-color !default;
$checkbox-filled-in-disabled-background-color: $checkbox-disable-color !default;

/* top: -4px;
left: -5px;
width: 12px;
height: 22px; */

@mixin checkbox-errors {
	// helper text
	@include validate-helper-text;
	& ~ .helper-text {
		pointer-events: none;
	}

	// Valid Input Style
	&[validate][valid],
	&:focus[validate][valid] {
		@extend %valid-input-style;
	}
	&.filled-in[validate][valid] + span::after {
		border-color: $input-success-color !important;
	}

	// Custom Success Message
	&:focus[validate][valid] ~ label {
		color: $input-success-color;
	}

	// Invalid Input Style
	&[validate][invalid],
	&:focus[validate][invalid] {
		@extend %invalid-input-style;
	}
	&[validate][invalid]:not(.filled-in) + span::before {
		border-color: $input-error-color !important;
	}
	&.filled-in[validate][invalid] + span::after {
		border-color: $input-error-color !important;
	}

	// Custom Error message
	&:focus[validate][invalid] ~ label {
		color: $input-error-color;
	}
}

/* Remove default checkbox */
@mixin checkbox-normalize {
	[type="checkbox"]:not(:checked),
	[type="checkbox"]:checked {
		position: absolute;
		opacity: 0;
		pointer-events: none;
	}
}

// Checkbox Styles
@mixin checkbox-base {
	[type="checkbox"] {
		// Text Label Style
		+ span:not(.lever) {
			position: relative;
			padding-left: 25px;
			cursor: pointer;
			display: inline-block;
			height: 25px;
			line-height: 25px;
			font-size: 1rem;
			user-select: none;
		}

		/* checkbox aspect */
		+ span:not(.lever):before,
		&:not(.filled-in) + span:not(.lever):after {
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			width: 18px;
			height: 18px;
			z-index: 0;
			border: 2px solid $checkbox-empty-color;
			border-radius: 1px;
			margin-top: 3px;
			transition: 0.2s;
		}

		&:not(.filled-in) + span:not(.lever):after {
			border: 0;
			transform: scale(0);
		}

		&:not(:checked):disabled + span:not(.lever):before {
			border: none;
			background-color: $checkbox-disable-color;
		}

		// Focused styles
		&.tabbed:focus + span:not(.lever):after {
			transform: scale(1);
			border: 0;
			border-radius: 50%;
			box-shadow: 0 0 0 10px rgba(0, 0, 0, 0.1);
			background-color: rgba(0, 0, 0, 0.1);
		}
	}

	[type="checkbox"]:checked {
		+ span:not(.lever):before {
			top: $checkbox-top;
			left: $checkbox-left;
			width: $checkbox-width;
			height: $checkbox-height;
			border-top: 2px solid transparent;
			border-left: 2px solid transparent;
			border-right: $checkbox-border;
			border-bottom: $checkbox-border;
			transform: rotate(40deg);
			backface-visibility: hidden;
			transform-origin: 100% 100%;
		}

		&:disabled + span:before {
			border-right: 2px solid $checkbox-disable-color;
			border-bottom: 2px solid $checkbox-disable-color;
		}
	}

	// helper text errors 
	[type="checkbox"] {
		@include checkbox-errors;
	}
}

@mixin checkbox-fill-in {
	// Filled in Style
	[type="checkbox"].filled-in {
		// General
		+ span:not(.lever):after {
			border-radius: 2px;
		}

		+ span:not(.lever):before,
		+ span:not(.lever):after {
			content: "";
			left: 0;
			position: absolute;
			/* .1s delay is for check animation */
			transition: border 0.25s, background-color 0.25s, width 0.2s 0.1s,
				height 0.2s 0.1s, top 0.2s 0.1s, left 0.2s 0.1s;
			z-index: 1;
		}

		// Unchecked style
		&:not(:checked) + span:not(.lever):before {
			width: 0;
			height: 0;
			border: 3px solid transparent;
			left: 6px;
			top: 10px;
			transform: rotateZ(37deg);
			transform-origin: 100% 100%;
		}

		&:not(:checked) + span:not(.lever):after {
			height: 20px;
			width: 20px;
			background-color: transparent;
			border: 2px solid $checkbox-empty-color;
			top: 0px;
			z-index: 0;
		}

		// Checked style
		&:checked {
			/* Icono de seleccion */
			+ span:not(.lever):before {
				top: 0;
				left: 1px;
				width: 8px;
				height: 13px;
				border-top: 2px solid transparent;
				border-left: 2px solid transparent;
				border-right: 2px solid $checkbox-filled-in-fill-color;
				border-bottom: 2px solid $checkbox-filled-in-fill-color;
				transform: rotateZ(37deg);
				transform-origin: 100% 100%;
			}

			/* Border o contorno */
			+ span:not(.lever):after {
				top: 0;
				width: 20px;
				height: 20px;
				border: 2px solid $checkbox-filled-in-border-color;
				background-color: $checkbox-filled-in-background-color;
				z-index: 0;
			}
		}

		// Focused styles
		&.tabbed:focus + span:not(.lever):after {
			border-radius: 2px;
			border-color: $checkbox-empty-color;
			background-color: rgba(0, 0, 0, 0.1);
		}

		&.tabbed:checked:focus + span:not(.lever):after {
			border-radius: 2px;
			background-color: $checkbox-filled-in-checked-background-color;
			border-color: $checkbox-filled-in-checked-border-color;
		}

		// Disabled style
		&:disabled:not(:checked) + span:not(.lever):before {
			background-color: transparent;
			border: 2px solid transparent;
		}

		&:disabled:not(:checked) + span:not(.lever):after {
			border-color: transparent;
			background-color: $checkbox-disable-color;
		}

		&:disabled:checked + span:not(.lever):before,
		&.active:checked + span:not(.lever):before {
			background-color: transparent;
			border-right: 2px solid $checkbox-filled-in-disabled-color;
			border-bottom: 2px solid $checkbox-filled-in-disabled-color;
		}

		&:disabled:checked + span:not(.lever):after {
			background-color: $checkbox-filled-in-disabled-background-color;
			border-color: $checkbox-filled-in-disabled-border-color;
		}

		&.active:checked + span:not(.lever):after {
			background-color: $checkbox-active-color;
			border-color: $checkbox-active-color;
		}
	}
}

@mixin checkbox-others {
	/* Indeterminate checkbox */
	[type="checkbox"]:indeterminate {
		+ span:not(.lever):before {
			top: -11px;
			left: -12px;
			width: 10px;
			height: 22px;
			border-top: none;
			border-left: none;
			border-right: $checkbox-border;
			border-bottom: none;
			transform: rotate(90deg);
			backface-visibility: hidden;
			transform-origin: 100% 100%;
		}

		// Disabled indeterminate
		&:disabled + span:not(.lever):before {
			border-right: 2px solid $checkbox-disable-color;
			background-color: transparent;
		}
	}
}

@mixin web-checkbox($includeFill: false) {
	@include checkbox-normalize;
	@include checkbox-base;
	@include checkbox-fill-in;
}
