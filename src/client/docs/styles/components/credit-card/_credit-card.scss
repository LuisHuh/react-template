/**
 * @component Credit Card
 * @version 1.0.0
 * @author lhuh
 * @summary Estilos de tarjeta de credito
 */

////
/// @group credit-card
////

@import "common";
@import "elements";
@import "cards";

$cd-tag-identified: ".identified" !default;
$cd-tag-front: ".cd-front" !default;

$credit-card-width: 16.667rem !default;
$credit-card-height: 142.85px !default;
$credit-card-logo-font-family: "Helvetica Neue", Helvetica, Arial, sans-serif !default;
$credit-card-font-family: "Bitstream Vera Sans Mono", Consolas, Courier,
	monospace !default;
$credit-card-border-radius: 0.7rem !default;
$credit-card-background: #ddd !default;
$credit-card-identified-background: rgba(0, 0, 0, 0.5) !default;
$credit-card-back-background: #fff !default;
$chip-background: #ccc !default;
$chip-inside-background: #d9d9d9 !default;
$chip-border-radius: 0.35rem !default;
$chip-width: 3.34rem !default;

// Colores seg√∫n el tipo de tarjeta identificada
[component="credit-card"].identified{
  &.cc-visa{
    background-color: #191278;
  }
  &.cc-mastercard{
    background-color: #0061A8;
  }
  &.cc-amex{
    background-color: #108168;
  }
  &.cc-unknown{
    background-color: #99a6b6;
  }
}

.card-thumb-container :not(.current) {
  filter: (grayscale(1));
}

// #region Estilos Base
@mixin credit-card-base {
	perspective: 1000px;
	width: $credit-card-width;
	margin: auto;
	position: relative;
	border-radius: $credit-card-border-radius;
	background: $credit-card-background;
	transform-style: preserve-3d;
	transition: all 400ms linear;

	@include cd-identified-element(true) {
		box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
		background-color: $credit-card-identified-background;
	}
}

@mixin cd-wrapper {
	font-family: $credit-card-logo-font-family;
	line-height: 1;
	position: relative;
}

@mixin cd-flipped {
	transform: rotateY(180deg);
}

// Estilos en vista frontal
@mixin cd-front {
	@include cd-front-element() {
		@extend %views-style;
	}
}

@mixin cd-identified-front {
	@include cd-front-element() {
		&::before {
			@extend %cd-identified;
		}
	}
}

@mixin cd-front-badges {
	font-family: $credit-card-font-family;
	:not([widget="cd-chip"]) {
		@extend %cd-light;
	}
}

@mixin cd-chip {
	position: relative;
	width: $chip-width;
	height: (strip-unit($chip-width) - 1) * 1rem;
	border-radius: $chip-border-radius;
	background: $chip-background;

	&::before {
		content: " ";
		display: block;
		width: 70%;
		height: 60%;
		border-top-right-radius: $chip-border-radius;
		border-bottom-right-radius: $chip-border-radius;
		background: $chip-inside-background;
		@include position-absolute(false, 20%, false, false, false);
	}
}

@mixin cd-cvc {
	visibility: hidden;
	float: right;
	position: relative;
}

@mixin cd-number {
	font-size: 1.25rem;
	height: 3.35rem;
	margin-bottom: 0.35rem;
	clear: both;
	@include flex($align-items: center);
}

@mixin cd-holder-name {
	text-transform: uppercase;
	max-height: 45px;
	width: 75%;
	float: left;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: horizontal;
	overflow: hidden;
	text-overflow: ellipsis;
}

@mixin cd-expiry {
	letter-spacing: 0em;
	position: relative;
	float: right;
	width: 25%;
	font-size: 0.8rem;

	&::before {
		content: attr(data-before);
		margin-bottom: 0.14rem;
		text-transform: uppercase;
		@extend %expiry-pseudo;
	}

	&::after {
		content: attr(data-after);
		position: absolute;
		text-align: right;
		right: 100%;
		margin-right: 0.34rem;
		margin-top: 0.14rem;
		bottom: 0;

		@extend %expiry-pseudo;
	}
}

// Estilos en vista lateral
@mixin cd-back {
	@include cd-back-element {
		@extend %views-style;
		@include position-absolute($margin: false);
		padding: 0;
		transform: rotateY(180deg);

		&::before{
			@extend %cd-identified;
		}

		&::after {
			content: " ";
			display: block;
			background-color: $credit-card-back-background;
			background-image: linear-gradient(
				$credit-card-back-background,
				$credit-card-back-background
			);
			width: 75%;
			height: 16%;
			@include position-absolute(0.5rem, 42.5%, false, false, false);
		}

		@include cd-cvc-element() {
			@extend %cd-light;
			position: absolute;
			top: 40%;
			width: 17%;
			right: 0.5rem;
			visibility: visible;
			text-align: center;
		}

		@include cd-chip-element {
			@include position-absolute(0.2rem, 71%, false, false, false);
			transform: scale(0.8);
			&::after {
				content: $cd-content-terms;
				width: 15.4rem;
				font-size: 0.54rem;
				text-align: justify;
				@extend %cd-light;
				@include position-absolute(120%, -5%, false, false, false);
			}
		}
	}
}

@mixin cd-bar {
	background-color: #444;
	background-image: linear-gradient(#444, #333);
	width: 100%;
	height: 20%;
	position: absolute;
	top: 10%;

	&::before {
		content: $cd-content-sign-authorization;
		@extend %cd-bar;
		font-size: 0.8rem;
		top: 2rem;
	}

	&::after {
		content: $cd-content-sign-invalid;
		@extend %cd-bar;
		font-size: 0.74rem;
		top: 3.7rem;
		display: block;
	}
}
// #endregion

// #region Estilos de tarjetas

// #endregion

@mixin web-credit-card {
	@include credit-card {
		@include credit-card-base;

		@include cd-identified-element(true) {
			@include cd-identified-front;
		}

		@include cd-flipped-element(true) {
			@include cd-flipped;
		}

		@include cd-group-element {
			@include clearfix;
		}
	}

	@include cd-wrapper-element {
		@include cd-wrapper;
		@include cd-front;
		@include cd-back();

		@include cd-badges-element {
			@include cd-front-badges;
		}

		@include cd-chip-element {
			@include cd-chip;
		}

		@include cd-cvc-element {
			@include cd-cvc;
		}

		@include cd-number-element {
			@include cd-number;
		}

		@include cd-holder-element {
			@include cd-holder-name;
		}

		@include cd-expiry-element {
			@include cd-expiry;
		}

		@include cd-bar-element {
			@include cd-bar;
		}
	}
}

@include web-credit-card;
